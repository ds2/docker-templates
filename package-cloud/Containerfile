FROM opensuse/leap:42.3
ARG UID=1000
RUN zypper up -y; zypper in -y ruby ruby-devel gcc-c++ less sudo zsh helix vim system-group-wheel system-user-mail; zypper clean -a
RUN useradd -m -u ${UID} -s /usr/bin/zsh -g users -c "PackageCloud User" packager
RUN usermod -aG wheel packager
RUN gem install package_cloud # we install the latest version

COPY entrypoint.sh /entrypoint.sh
RUN /entrypoint.sh package_cloud version

USER packager
WORKDIR /work
ENTRYPOINT [ "/entrypoint.sh" ]
CMD [ "/bin/bash" ]
